(this.webpackJsonpfrontend_intern_challenge=this.webpackJsonpfrontend_intern_challenge||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(15),c=n.n(s),i=n(5),o=n.n(i),u=n(7),l=(n(34),n(24)),h=n(25),p=n(12),d=n(28),f=n(27),j=n(14),b=n(23),m=(n(35),n(10)),v=function(e){return{type:"LOGIN",user:e}},O=function(e){return{type:"ADD",user:e}},x=function(e){return{type:"REMOVE",user:e}},g=(n(20),n(9));function w(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.a.firestore(),r=n.collection("userNominations"),e.next=4,r.where("userId","==",t.uid).get();case 4:return e.sent.forEach((function(e){return a=e.data()})),a||(a={userId:t.uid,Nominations:[],Trash:[],displayName:t.displayName,photoURL:t.photoURL},r.add(a)),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=g.a.firestore(),e.next=4,a.collection("userNominations").where("userId","==",t.userId).get();case 4:return e.sent.forEach((function(e){a.collection("userNominations").doc(e.id).update({Nominations:g.a.firestore.FieldValue.arrayUnion(n),Trash:g.a.firestore.FieldValue.arrayRemove(n)})})),e.next=8,a.collection("userNominations").where("userId","==",t.userId).get();case 8:return e.sent.forEach((function(e){return r=e.data()})),e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(0),console.error("Error getting documents: ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function k(e,t){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=g.a.firestore(),e.next=4,a.collection("userNominations").where("userId","==",t.userId).get();case 4:return e.sent.forEach((function(e){a.collection("userNominations").doc(e.id).update({Nominations:g.a.firestore.FieldValue.arrayRemove(n),Trash:g.a.firestore.FieldValue.arrayUnion(n)})})),e.next=8,a.collection("userNominations").where("userId","==",t.userId).get();case 8:return e.sent.forEach((function(e){return r=e.data()})),e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(0),console.error("Error getting documents: ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var R=n(2),E=function(e){var t=Object(m.d)((function(e){return e.user})),n=Object(r.useState)({position:"relative",left:"1.5rem"}),a=Object(b.a)(n,2),s=a[0],c=a[1],i=Object(r.useState)(e.isNominated),l=Object(b.a)(i,2),h=l[0],p=l[1],d=Object(m.c)();function f(){return(f=Object(u.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=d,n.t1=O,n.next=4,N(t,e.MovieId);case 4:n.t2=n.sent,n.t3=(0,n.t1)(n.t2),(0,n.t0)(n.t3),p(!0),c((function(e){return Object(j.a)(Object(j.a)({},e),{},{color:"red"})}));case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function v(){return(v=Object(u.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=d,n.t1=x,n.next=4,k(t,e.MovieId);case 4:n.t2=n.sent,n.t3=(0,n.t1)(n.t2),(0,n.t0)(n.t3),p(!1),c((function(e){return Object(j.a)(Object(j.a)({},e),{},{color:"red"})}));case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(R.jsxs)("div",{className:"SearchResult-Container",children:[Object(R.jsx)("img",{src:e.Poster,className:"SearchImage",alt:"Movie Poster"}),Object(R.jsxs)("div",{children:[Object(R.jsxs)("p",{className:"Title",children:[e.Title," (",e.Year,")"]}),h?Object(R.jsx)("div",{className:"fas fa-trash",onClick:function(){return v.apply(this,arguments)},style:s}):Object(R.jsx)("div",{className:"fas fa-trophy",onClick:function(){return f.apply(this,arguments)},style:s})]})]})};n(41);n(42).config();var P=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).state={userinput:"",searchResult:[],numOfResults:0,page:1},r.apiKey="3957fc4e&s",r.handleSearch=r.handleSearch.bind(Object(p.a)(r)),r.handleClear=r.handleClear.bind(Object(p.a)(r)),r.handlePageNext=r.handlePageNext.bind(Object(p.a)(r)),r.handlePagePrev=r.handlePagePrev.bind(Object(p.a)(r)),r.renderResults=r.renderResults.bind(Object(p.a)(r)),r}return Object(h.a)(n,[{key:"handleSearch",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,this.setState({userinput:n}),r=[],e.next=5,fetch("https://www.omdbapi.com/?apikey=".concat(this.apiKey,"=").concat(n,"&page=").concat(this.state.page));case 5:return e.next=7,e.sent.json();case 7:(a=e.sent).Search&&(r=this.renderResults(a.Search),this.setState({searchResult:r,numOfResults:a.totalResults}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePageNext",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://www.omdbapi.com/?apikey=".concat(this.apiKey,"=").concat(this.state.userinput,"&page=").concat(this.state.page+1));case 3:return e.next=5,e.sent.json();case 5:(n=e.sent).Search&&(t=this.renderResults(n.Search),this.setState((function(e){return{page:e.page+1,searchResult:t}}))),window.scrollTo({top:0,left:0,behavior:"smooth"});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handlePagePrev",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://www.omdbapi.com/?apikey=".concat(this.apiKey,"=").concat(this.state.userinput,"&page=").concat(this.state.page-1));case 3:return e.next=5,e.sent.json();case 5:(n=e.sent).Search&&(t=this.renderResults(n.Search),this.setState((function(e){return{page:e.page-1,searchResult:t}}))),window.scrollTo({top:0,left:0,behavior:"smooth"});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClear",value:function(){this.setState({userinput:"",searchResult:[],numOfResults:0,page:1})}},{key:"renderResults",value:function(e){var t=this;return e.map((function(e){var n=t.props.user.Nominations.includes(e.imdbID);return Object(R.jsx)(E,{Title:e.Title,Poster:e.Poster,Year:e.Year,MovieId:e.imdbID,isNominated:n})}))}},{key:"render",value:function(){return Object(R.jsxs)("div",{className:"Container",children:[Object(R.jsx)("h2",{children:"Search Movies"}),Object(R.jsxs)("div",{className:"input-wrapper",children:[Object(R.jsx)("div",{className:"fa fa-search"}),Object(R.jsx)("input",{type:"text",value:this.state.userinput,placeholder:"Search here",onChange:this.handleSearch}),Object(R.jsx)("div",{className:"fa fa-times",onClick:this.handleClear})]}),this.state.searchResult,Object(R.jsxs)("div",{className:"buttons",children:[this.state.page>1&&Object(R.jsx)("button",{onClick:this.handlePagePrev,className:"NextButton",children:"Previous"}),this.state.numOfResults>10*this.state.page&&Object(R.jsx)("button",{onClick:this.handlePageNext,className:"PrevButton",children:"Next"})]})]})}}]),n}(a.a.Component),C=Object(m.b)((function(e){return{user:e.user}}))(P),T=(n(45),function(e){var t=Object(m.d)((function(e){return e.user}));return Object(R.jsx)("div",{children:Object(R.jsxs)("div",{className:"SideBarItem",children:[Object(R.jsx)("label",{className:"SideBarLabel",children:e.name}),Object(R.jsx)("div",{children:Object(R.jsx)("i",{className:e.icon,style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"fit-content",height:"fit-content",margin:"0.3vw 0 0 1.5vw"},children:null!=t&&void 0!=t[e.name]&&Object(R.jsx)("label",{style:{position:"absolute",top:"-3.5vw",right:" -3.5vw",fontSize:"80%",backgroundColor:"#ff6600",color:"white",fontWeight:500,padding:"2px 10px",borderRadius:"50px",width:"1px"},children:t[e.name].length})})})]})})}),_=(n(46),n(47),function(e){return Object(R.jsxs)("div",{className:"profileContainer",children:[Object(R.jsx)("img",{className:"profileImage",src:e.img}),Object(R.jsxs)("label",{className:"profileName",children:[" ",e.name," "]})]})}),D=function(){var e=Object(m.d)((function(e){return e.user}));return Object(R.jsxs)("div",{className:"SideBar",children:[e&&Object(R.jsx)(_,{img:e.photoURL,name:e.displayName,userId:e.uid}),Object(R.jsx)(T,{name:"Nominations",icon:"fas fa-trophy"}),Object(R.jsx)(T,{name:"Trash",icon:"fas fa-trash"})]})};n(48);function L(){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.a.auth(),n=new g.a.auth.GoogleAuthProvider,e.next=4,t.signInWithPopup(n);case 4:return r=e.sent,e.next=7,w(r.user);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.a.auth(),e.next=3,t.signOut();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g.a.initializeApp({apiKey:"AIzaSyC7yKIMHuibYdZYpvLJDZjopGgqS2WxmE8",authDomain:"frontend-intern-challenge.firebaseapp.com",projectId:"frontend-intern-challenge",storageBucket:"frontend-intern-challenge.appspot.com",messagingSenderId:"1010737931879",appId:"1:1010737931879:web:65395f3764800457b0d6c2"});var B=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.user})),n=g.a.firestore();return Object(R.jsxs)("div",{children:[t?Object(R.jsx)("button",{onClick:Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M();case 3:e({type:"LOGOUT"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))),children:"Sign out"}):Object(R.jsx)("button",{onClick:Object(u.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L();case 3:return r=t.sent,e(v(r)),t.next=7,n.collection("userNominations").where("userId","==",r.userId).onSnapshot((function(t){t.docs.map((function(t){return e(v(t.data()))}))}));case 7:t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),children:"Sign in With Google"}),Object(R.jsxs)("div",{className:"flexbox-container",children:[Object(R.jsx)(D,{className:"flexbox-container-1"}),Object(R.jsx)(C,{})]})]})},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.user;case"LOGOUT":return null;case"ADD":case"REMOVE":return t.user;default:return e}},K=n(16),A=Object(K.a)({user:G}),Y=Object(K.b)(A,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(Object(R.jsx)(m.a,{store:Y,children:Object(R.jsx)(B,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.2ac3a16c.chunk.js.map